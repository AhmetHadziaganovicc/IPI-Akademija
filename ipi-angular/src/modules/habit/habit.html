<div class="habit-wrapper">

  <div class="habit-card">
    <h2>ğŸ”¥ Pratioc Navika</h2>
    <p class="subtitle">
      Gradite moÄ‡ne rutine kroz male, dosljedne korake svaki dan
    </p>

    <div class="add-section">
      <div class="input-group">
        <input
          class="habit-input"
          type="text"
          placeholder="Unesite naziv navike (npr. VjeÅ¾banje, ÄŒitanje, Meditacija)"
          [(ngModel)]="habitName"
          maxlength="30">
        
        <input
          class="days-input"
          type="number"
          min="1"
          max="100"
          placeholder="Dani"
          [(ngModel)]="targetDays"
          [style.color]="getTargetColor()">
      </div>

      <button 
        class="add-btn" 
        (click)="addHabit()"
        [disabled]="!habitName || !targetDays">
        <span>ğŸš€ Dodaj Novu Naviku</span>
      </button>
    </div>

    <div class="habits-container">
      <div 
        class="empty" 
        *ngIf="habits.length === 0">
        <div style="margin-bottom: 10px; font-size: 48px;">ğŸ“‹</div>
        <p>JoÅ¡ nema navika. ZapoÄnite gradnju svoje rutine!</p>
        <p style="font-size: 14px; margin-top: 5px; opacity: 0.7;">Dodajte svoju prvu naviku iznad</p>
      </div>

      <div 
        class="habit-item" 
        *ngFor="let habit of habits; let i = index"
        [style.animation-delay]="i * 0.1 + 's'">
        
        <div 
          class="streak-badge" 
          *ngIf="habit.completed >= habit.target">
          ğŸ† ZAVRÅ ENO
        </div>

        <div class="habit-header">
          <div class="habit-name">
            <span class="habit-icon" [style.color]="getHabitColor(i)">
              {{ getHabitIcon(i) }}
            </span>
            {{ habit.name }}
          </div>
          <span class="count">
            {{ habit.completed }} / {{ habit.target }} dana
          </span>
        </div>

        <div class="progress-container">
          <div class="progress-info">
            <span class="percent">
              {{ progress(habit) }}% ZavrÅ¡eno
            </span>
            <span class="days-count">
              {{ getDaysRemaining(habit) }} dana preostalo
            </span>
          </div>
          
          <div class="progress-bar">
            <div
              class="progress-fill"
              [style.width.%]="progress(habit)">
            </div>
          </div>
        </div>

        <div class="actions">
          <button 
            class="done" 
            (click)="markDone(habit)"
            [disabled]="habit.completed >= habit.target"
            title="OznaÄi kao zavrÅ¡eno za danas">
            <span>âœ…</span>
            <span>{{ habit.completed >= habit.target ? 'ZavrÅ¡eno' : 'OznaÄi ZavrÅ¡enim' }}</span>
          </button>
          
          <button 
            class="delete" 
            (click)="removeHabit(i)"
            title="ObriÅ¡i ovu naviku">
            <span>ğŸ—‘ï¸</span>
            <span>ObriÅ¡i</span>
          </button>
        </div>

      </div>
    </div>

    <div class="stats-summary" *ngIf="habits.length > 0">
      <div style="
        display: flex; 
        justify-content: space-between; 
        margin-top: 25px; 
        padding: 20px; 
        background: rgba(255, 255, 255, 0.03); 
        border-radius: 16px; 
        border: 1px solid rgba(255, 255, 255, 0.05);
        text-align: center;
      ">
        <div>
          <div style="font-size: 24px; font-weight: 700; color: #43cea2;">
            {{ getTotalCompleted() }}
          </div>
          <div style="font-size: 13px; opacity: 0.7;">Ukupno ZavrÅ¡eno</div>
        </div>
        
        <div>
          <div style="font-size: 24px; font-weight: 700; color: #667eea;">
            {{ getCompletionRate() }}%
          </div>
          <div style="font-size: 13px; opacity: 0.7;">Stopa Uspjeha</div>
        </div>
        
        <div>
          <div style="font-size: 24px; font-weight: 700; color: #ff6b6b;">
            {{ getStreakCount() }}
          </div>
          <div style="font-size: 13px; opacity: 0.7;">Trenutni Niz</div>
        </div>
      </div>
    </div>

    <button class="back" routerLink="/dashboard">
      <span>â†</span>
      <span>Nazad na Kontrolnu Tablu</span>
    </button>
  </div>

</div>